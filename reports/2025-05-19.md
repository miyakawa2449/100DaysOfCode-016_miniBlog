# 開発レポート - 2025年05月19日

## 📋 作業概要
- **プロジェクト**: ミニブログシステム (100DaysOfCode-016_miniBlog)
- **作業日**: 2025年5月19日
- **作業時間**: 約5時間（※Gitログの変更量と時刻から推測）
- **メインタスク**: 記事とカテゴリのCRUD機能実装、およびデータベースマイグレーション導入

## 🎯 今日の目標
- [x] `Flask-Migrate`を導入し、データベーススキーマのバージョン管理を開始する
- [x] 管理画面に記事のCRUD（作成・一覧・更新・削除）機能を実装する
- [x] 管理画面にカテゴリのCRUD機能を実装する
- [x] 公開側に記事詳細ページとカテゴリ別記事一覧ページを作成する
- [x] 管理画面と公開側の共通レイアウトを作成し、テンプレートの重複を削減する

## ✅ 完了した作業

### 1. データベースマイグレーションの導入 (`migrations/`)
`Flask-Migrate` (Alembic) を導入し、データベーススキーマをコードで管理できるようにしました。これにより、今後のモデル変更を安全かつ追跡可能に行う基盤が整いました。
- **初期マイグレーション作成**: `versions/13c99d461598_...` ファイルを作成し、現在のデータベース構造を最初のバージョンとして記録しました。

### 2. 記事・カテゴリ管理機能の実装 (`admin.py`)
ブログの中核機能である記事とカテゴリの管理機能を一通り実装しました。
- **CRUDロジック**: `admin.py` に、記事とカテゴリの作成、一覧表示、更新、削除を行うためのルートとロジックを追加しました。
- **管理画面UI**: 以下のテンプレートを作成・更新し、直感的に操作できるUIを構築しました。
  - `articles.html`, `create_article.html`, `edit_article.html`
  - `categories.html`, `create_category.html`, `edit_category.html`

### 3. 公開側ページの作成 (`app.py`, `templates/`)
管理画面で作成したコンテンツを一般ユーザーが閲覧できるように、以下のページを作成しました。
- **`article_detail.html`**: 個別の記事を表示する詳細ページ。
- **`category_page.html`**: 特定のカテゴリに属する記事を一覧表示するページ。

### 4. テンプレートの共通化 (`layout.html`)
コードの重複をなくし、保守性を高めるために、Jinja2のテンプレート継承機能を利用しました。
- **`admin/layout.html`**: 管理画面用の共通ヘッダー、サイドバー、フッターを定義。
- **`layout.html`**: 公開側ページ用の共通レイアウトを定義。

### 5. 開発環境の改善 (`.flaskenv`)
`.flaskenv` ファイルを追加し、`FLASK_APP` などの環境変数を定義することで、`flask run` コマンドを簡単に実行できるようにしました。

## 💡 学んだこと

- **Flask-Migrateの威力**: データベーススキーマの変更履歴をGitのように管理できるため、チーム開発や長期的な運用において非常に重要であることを学びました。
- **CRUD実装パターン**: Webアプリケーションの基本的な機能であるCRUDを、Flaskのルート、ロジック、テンプレートを連携させて実装する一連の流れを習得しました。
- **テンプレート継承**: `{% extends 'base.html' %}` と `{% block content %}` を使うことで、HTMLの共通部分を効率的に管理できることを実践しました。
- **大規模リファクタリング**: 多数のファイルにまたがる大規模な機能追加を行う際の、体系的な進め方と注意点を経験しました。

## 🚀 次回への課題

- **認証と認可**: `Flask-Login` を本格的に導入し、未認証ユーザーが管理画面にアクセスできないようにセキュリティを強化する。
- **リレーションシップの活用**: 記事とカテゴリ、記事とユーザーを関連付け、テンプレートで著者名やカテゴリ名を表示できるようにする。
- **Flashメッセージ**: 記事の保存成功時やエラー発生時に、ユーザーにフィードバックメッセージを表示する機能を実装する。

---
**本日の成果**: ブログシステムのコア機能がほぼ完成。コンテンツの作成から公開までの一連の流れが実現し、プロジェクトが大きく前進